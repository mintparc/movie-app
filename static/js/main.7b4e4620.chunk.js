(this["webpackJsonpmovie-app"]=this["webpackJsonpmovie-app"]||[]).push([[0],{48:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var s=a(2),i=a.n(s),n=a(4),c=a.n(n),r=a(6),o=a.n(r),l=a(17),d=a(18),m=a(19),j=a(25),u=a(23),v=a(7),b=a.n(v),p=(a(48),a(0));var h=function(){return Object(p.jsxs)("header",{className:"header",children:[Object(p.jsx)("h1",{className:"header__logo",children:"\u3147\u3155\u3147 \u314e\u3157\u314f"}),Object(p.jsx)("nav",{className:"nav-menu"})]})},g=a(1),O=a.n(g);a(52);function _(e){var t=e.title,a=e.summary,s=e.poster,i=e.bg;return Object(p.jsxs)("div",{className:"main-movie",style:{backgroundImage:"url( ".concat(i," )")},children:[Object(p.jsx)("div",{className:"main-movie__gradient"}),Object(p.jsx)("img",{className:"main-movie__poster",src:s,alt:t}),Object(p.jsx)("h3",{className:"main-movie__title",children:t}),Object(p.jsx)("p",{className:"main-movie__summary",children:a})]})}_.prototypes={title:O.a.string.isRequired,summary:O.a.string.isRequired,poster:O.a.string.isRequired,bg:O.a.string.isRequired};var x=_,f=a(24),y=(a(53),a.p+"static/media/fill-heart.6dcaf848.svg"),N=a.p+"static/media/empty-heart.c31d61db.svg";function k(e){var t=e.id,a=e.title,i=e.summary,n=e.poster,c=e.genres,r=e.handleModalOpen,o=[],l=function(){localStorage.setItem("favorites",JSON.stringify(o))},d=function(e){var t=e.target;j(),o=o.filter((function(e){return e!==t.id})),l(),h({img:N,onclick:m})},m=function(e){var t=e.target;j(),o.push(t.id),l(),h({img:y,onclick:d})},j=function(){var e=localStorage.getItem("favorites");if(null!==e){var t=JSON.parse(e);o=t}};j();var u=Object(s.useState)({img:o.includes(t)?y:N,onclick:o.includes(t)?d:m}),v=Object(f.a)(u,2),b=v[0],h=v[1];return Object(p.jsx)(s.Fragment,{children:Object(p.jsxs)("div",{className:"card-movie",children:[Object(p.jsx)("div",{className:"card-movie__trailer",children:Object(p.jsx)("button",{onClick:r,children:"\u25b6\ufe0e show trailer"})}),Object(p.jsx)("img",{className:"card-movie__poster",src:n,alt:a}),Object(p.jsxs)("div",{className:"card-movie__data",children:[Object(p.jsx)("img",{className:"card-movie__heart",id:t,src:b.img,onClick:b.onclick,alt:"heart"}),Object(p.jsx)("h3",{className:"card-movie__title",children:a}),Object(p.jsx)("ul",{className:"card-movie__genres",children:c.slice(0,3).map((function(e,t){return Object(p.jsx)("li",{className:"card-movie__genre",children:e},t)}))}),Object(p.jsx)("p",{className:"card-movie__summary",children:i})]})]})})}k.prototypes={id:O.a.string.isRequired,title:O.a.string.isRequired,summary:O.a.string.isRequired,poster:O.a.string.isRequired,genres:O.a.arrayOf(O.a.string).isRequired};var M=k,I=(a(54),a.p+"static/media/skeleton-heart.fdb76413.svg");var q=function(){return Object(p.jsxs)(s.Fragment,{children:[Object(p.jsxs)("section",{className:"main-skeleton",children:[Object(p.jsx)("div",{className:"main-skeleton__poster"}),Object(p.jsx)("p",{className:"main-skeleton__title"}),Object(p.jsx)("p",{className:"main-skeleton__summary"})]}),Object(p.jsx)("section",{className:"list-skeleton",children:Array(20).fill("").map((function(e,t){return Object(p.jsxs)("div",{className:"card-skeleton",children:[Object(p.jsx)("div",{className:"card-skeleton__poster"}),Object(p.jsxs)("div",{className:"card-skeleton__data",children:[Object(p.jsx)("img",{className:"card-skeleton__heart",src:I,alt:"heart"}),Object(p.jsx)("p",{className:"card-skeleton__title"}),Object(p.jsx)("p",{className:"card-skeleton__genres"}),Object(p.jsx)("p",{className:"card-skeleton__summary"})]})]},t)}))})]})},S=a(20),w=(a(66),function(e){var t=e.children,a=document.getElementById("modal-root");return c.a.createPortal(t,a)});var R=function(e){var t=e.open,a=e.close,s=e.videoId;return Object(p.jsx)(w,{elementId:"modal",children:Object(p.jsx)("div",{className:t?"modal modal--open":"modal",onClick:a,children:t?Object(p.jsxs)("section",{onClick:function(e){return e.stopPropagation()},children:[Object(p.jsx)(S.a,{videoId:s,opts:{width:"100%",height:"550px",playerVars:{autoplay:1}}}),Object(p.jsx)("button",{className:"close",onClick:a,children:"close"})]}):null})})},C=(a(67),function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).state={isLoading:!0,isModalOpen:!1,main:[],movies:[],videoId:""},e.getMovies=Object(l.a)(o.a.mark((function t(){var a,s,i,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("https://yts-proxy.now.sh/list_movies.json?limit=1&sort_by=like_count&genre=animation&page=4");case 2:return a=t.sent,s=a.data.data.movies[0],t.next=6,b.a.get("https://yts-proxy.now.sh/list_movies.json?sort_by=like_count&quality=3D&genre=animation&page=2");case 6:i=t.sent,n=i.data.data.movies,e.setState({main:s,movies:n,isLoading:!1});case 9:case"end":return t.stop()}}),t)}))),e.handleModalOpen=function(t){e.setState({isModalOpen:!0,videoId:t})},e.handleModalClose=function(){e.setState({isModalOpen:!1})},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getMovies()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,i=t.main,n=t.movies,c=t.isModalOpen,r=t.videoId;return Object(p.jsxs)(s.Fragment,{children:[Object(p.jsx)(h,{}),Object(p.jsx)("main",{className:"container",children:a?Object(p.jsx)(q,{}):Object(p.jsxs)(s.Fragment,{children:[Object(p.jsx)(x,{title:i.title,summary:i.summary,poster:i.medium_cover_image,bg:i.background_image_original}),Object(p.jsx)("section",{className:"list-movie",children:n.map((function(t){return Object(p.jsx)(M,{id:t.id.toString(),title:t.title,summary:t.summary,poster:t.medium_cover_image,genres:t.genres,videoId:t.yt_trailer_code,handleModalOpen:e.handleModalOpen.bind(e,t.yt_trailer_code)},t.id)}))}),Object(p.jsx)(R,{open:c,close:this.handleModalClose,videoId:r})]})})]})}}]),a}(i.a.Component));c.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(C,{})}),document.getElementById("main-root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.7b4e4620.chunk.js.map